<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MENVOUS STORE - FishIt Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            darkblue: '#0a1a2f',
            lightgreen: '#00ff99',
            greenhover: '#00e68a',
          }
        }
      }
    }
  </script>
  <style>
    section {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }
    section:not(.hidden) {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body class="bg-darkblue text-white font-sans">

  <!-- Navbar -->
  <header class="flex items-center justify-between p-4 border-b border-gray-700 bg-[#0d213a]">
    <div class="flex items-center gap-2">
      <div class="bg-lightgreen text-darkblue font-bold rounded-lg px-2 py-1 text-lg">M</div>
      <span class="text-xl font-bold">MENVOUS STORE</span>
    </div>
    <button id="menuBtn" class="text-2xl md:hidden hover:text-lightgreen transition">‚ò∞</button>
  </header>

  <!-- Sidebar -->
  <aside id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-[#0d213a] shadow-2xl transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-50">
    <div class="p-5">
      <div class="flex items-center gap-2 mb-6">
        <div class="bg-lightgreen text-darkblue font-bold rounded-lg px-2 py-1 text-lg">M</div>
        <h1 class="text-xl font-bold">MENVOUS STORE</h1>
      </div>

      <input type="text" placeholder="Cari..." class="w-full p-2 mb-4 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-lightgreen" />

      <nav class="space-y-2">
        <button onclick="tampilkanToko()" class="flex items-center gap-3 p-2 rounded-lg w-full text-left hover:bg-greenhover/20 transition">
          <span class="text-lightgreen text-xl">üè†</span> Toko
        </button>
        <button onclick="tampilkanInvoice()" class="flex items-center gap-3 p-2 rounded-lg w-full text-left hover:bg-greenhover/20 transition">
          <span class="text-lightgreen text-xl">üîç</span> Cek Invoice
        </button>
        <button onclick="tampilkanUlasan()" class="flex items-center gap-3 p-2 rounded-lg w-full text-left hover:bg-greenhover/20 transition">
          <span class="text-lightgreen text-xl">‚≠ê</span> Ulasan
        </button>
      </nav>
    </div>
  </aside>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black/60 hidden z-40"></div>

  <!-- Main Content -->
  <main class="md:ml-64 p-6">

    <!-- TOKO SECTION -->
    <section id="toko-section">
      <h2 class="text-2xl font-bold mb-1 text-lightgreen">üî•POPULER SEKARANG!</h2>
      <p class="text-gray-500 text-xs italic mb-4">Produk pilihan terbaik kami saat ini.</p>

      <div id="produkGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4"></div>

      <!-- Form Pembeli -->
      <div class="bg-[#0d213a] p-5 rounded-xl mt-6">
        <h2 class="text-xl font-bold text-lightgreen mb-3">‚úâÔ∏è Detail Kontak</h2>
        <label>Email</label>
        <input type="email" id="email" placeholder="contoh@gmail.com" class="w-full p-2 mb-3 rounded-lg text-black">
        <label>Nomor WhatsApp Kamu</label>
        <input type="tel" id="whatsapp" placeholder="08xxxxxxxxxx" class="w-full p-2 mb-2 rounded-lg text-black">
        <p id="waError" class="text-red-400 text-xs mb-2 hidden">Nomor WA tidak valid. Gunakan format 08xxxxxxxx atau +628xxxxxxxx.</p>
        <div class="bg-[#13294b] p-4 rounded-lg mb-3">
          <h3 class="text-lg font-semibold mb-2 text-lightgreen">üõí Keranjang Belanja</h3>
          <div id="cartItems"></div>
          <div id="cartTotal" class="font-bold mt-2 text-right">Total: Rp 0</div>
        </div>
        <button id="orderBtn" onclick="kirimWhatsApp()" class="w-full bg-lightgreen hover:bg-greenhover text-darkblue font-bold py-2 rounded-lg transition">PESAN SEKARANG</button>
      </div>
    </section>

    <!-- INVOICE SECTION -->
    <section id="invoice-section" class="hidden">
      <h2 class="text-2xl font-bold mb-4 text-lightgreen">Cek Status Invoice</h2>
      <input type="text" id="invoice-id" placeholder="Masukkan ID Invoice..." class="w-full p-2 mb-3 rounded-lg text-black">
      <button onclick="cekInvoice()" class="bg-lightgreen hover:bg-greenhover text-darkblue font-bold px-4 py-2 rounded-lg">Cek Invoice</button>
      <div id="status-invoice" class="mt-4 bg-[#13294b] p-3 rounded-lg">Status invoice akan muncul di sini.</div>
    </section>

    <!-- ULASAN SECTION -->
    <section id="review-section" class="hidden">
      <h2 class="text-2xl font-bold mb-4 text-lightgreen">Ulasan Pelanggan</h2>
      <div id="review-list" class="space-y-4 mb-6">
        <div class="bg-[#13294b] p-4 rounded-lg">
          <h3 class="font-bold">BOKIRE</h3>
          <div class="text-yellow-400">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="text-gray-300">Produknya bagus dan pelayanannya cepat!</p>
        </div>
      </div>

      <div class="bg-[#0d213a] p-5 rounded-xl">
        <h3 class="text-xl font-bold text-lightgreen mb-3">Berikan Ulasan Anda</h3>
        <input type="text" id="nama" placeholder="Nama Anda" class="w-full p-2 mb-3 rounded-lg text-black">
        <label>Rating:</label>
        <div class="flex flex-row-reverse text-2xl mb-3">
          <input type="radio" id="star5" name="rating" value="5" class="hidden" />
          <label for="star5" class="cursor-pointer text-gray-400 hover:text-yellow-400">‚òÖ</label>
          <input type="radio" id="star4" name="rating" value="4" class="hidden" />
          <label for="star4" class="cursor-pointer text-gray-400 hover:text-yellow-400">‚òÖ</label>
          <input type="radio" id="star3" name="rating" value="3" class="hidden" />
          <label for="star3" class="cursor-pointer text-gray-400 hover:text-yellow-400">‚òÖ</label>
          <input type="radio" id="star2" name="rating" value="2" class="hidden" />
          <label for="star2" class="cursor-pointer text-gray-400 hover:text-yellow-400">‚òÖ</label>
          <input type="radio" id="star1" name="rating" value="1" class="hidden" />
          <label for="star1" class="cursor-pointer text-gray-400 hover:text-yellow-400">‚òÖ</label>
        </div>
        <textarea id="ulasan" rows="4" placeholder="Tulis ulasan Anda..." class="w-full p-2 mb-3 rounded-lg text-black"></textarea>
        <button onclick="tambahUlasan()" class="bg-lightgreen hover:bg-greenhover text-darkblue font-bold px-4 py-2 rounded-lg">Kirim Ulasan</button>
      </div>
    </section>
  </main>

  <footer class="text-center p-4 border-t border-gray-700 mt-6 text-gray-400">
    ¬© 2025 MENVOUS STORE | All Rights Reserved
  </footer>

  <script>
    // ===== Sidebar Control =====
    const sidebar = document.getElementById('sidebar');
    const menuBtn = document.getElementById('menuBtn');
    const overlay = document.getElementById('overlay');
    menuBtn.addEventListener('click', () => {
      sidebar.classList.toggle('-translate-x-full');
      overlay.classList.toggle('hidden');
    });
    overlay.addEventListener('click', () => {
      sidebar.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
    });

    // ===== Data Produk =====
    const daftarProduk = [
      { nama: 'AKUN ELEMENT', harga: 200000, stok: 1 },
      { nama: 'AKUN GHOSTFINN', harga: 55000, stok: 1 },
      { nama: 'AKUN GHOSTFINN', harga: 50000, stok: 1 },
      { nama: 'AKUN BAMBOO', harga: 45000, stok: 1 },
      { nama: 'AKUN ANGLER', harga: 40000, stok: 1 },
      { nama: 'AKUN ARES', harga: 35000, stok: 1 },
      { nama: 'AKUN HAZMAT', harga: 30000, stok: 1 },
      { nama: 'AKUN ASTRAL', harga: 30000, stok: 1 },
      { nama: 'AKUN COIN FISH IT', harga: 20000, stok: 1 },
      { nama: 'SECRET TUMBAL', harga: 7000, stok: 1 }
    ];
    const keranjang = [];
    const adminWA = "6282364492977";

    const produkGrid = document.getElementById("produkGrid");
    daftarProduk.forEach((p) => {
      const div = document.createElement("div");
      div.className = "bg-[#0d213a] rounded-xl p-3 shadow hover:shadow-lg transition";
      div.innerHTML = `
        <img src="https://dummyimage.com/200x120/c8f9d2/007f3d" class="w-full rounded-lg mb-2">
        <h3 class="text-lightgreen font-bold">${p.nama}</h3>
        <p class="text-gray-300 mb-2">Rp ${p.harga.toLocaleString('id-ID')}</p>
        <button onclick="tambahKeranjang('${p.nama}', ${p.harga}, this)" class="bg-lightgreen text-darkblue font-bold px-3 py-1 rounded-lg hover:bg-greenhover transition">Tambah</button>
      `;
      produkGrid.appendChild(div);
    });

    // ===== Navigasi Section =====
    function tampilkanToko() {
      setActive(0);
      document.getElementById("toko-section").classList.remove("hidden");
      document.getElementById("invoice-section").classList.add("hidden");
      document.getElementById("review-section").classList.add("hidden");
    }
    function tampilkanInvoice() {
      setActive(1);
      document.getElementById("toko-section").classList.add("hidden");
      document.getElementById("invoice-section").classList.remove("hidden");
      document.getElementById("review-section").classList.add("hidden");
    }
    function tampilkanUlasan() {
      setActive(2);
      document.getElementById("toko-section").classList.add("hidden");
      document.getElementById("invoice-section").classList.add("hidden");
      document.getElementById("review-section").classList.remove("hidden");
    }
    function setActive(index) {
      document.querySelectorAll("aside nav button").forEach((btn, i) => {
        btn.classList.remove("bg-greenhover/20");
        if (i === index) btn.classList.add("bg-greenhover/20");
      });
    }

    // ===== Keranjang =====
    function tambahKeranjang(nama, harga, tombol) {
      const produk = daftarProduk.find(p => p.nama === nama && p.harga === harga);
      if (!produk || produk.stok <= 0) return alert("Stok habis!");
      const item = keranjang.find(i => i.nama === nama);
      if (item) return alert("Produk ini sudah ada di keranjang!");

      keranjang.push({ nama, harga });
      produk.stok--;
      updateKeranjang();
      if (produk.stok <= 0) {
        tombol.textContent = "Stok Habis";
        tombol.disabled = true;
        tombol.classList.replace("bg-lightgreen", "bg-red-500");
      }
    }

    function updateKeranjang() {
      const list = document.getElementById("cartItems");
      const total = document.getElementById("cartTotal");
      list.innerHTML = "";
      let totalHarga = 0;
      keranjang.forEach((item, index) => {
        totalHarga += item.harga;
        const div = document.createElement("div");
        div.className = "flex justify-between mb-1";
        div.innerHTML = `
          <span>${item.nama}</span>
          <span>Rp ${item.harga.toLocaleString('id-ID')}</span>
          <button onclick="hapusItem(${index})" class="text-red-400 hover:text-red-600">‚ùå</button>
        `;
        list.appendChild(div);
      });
      total.textContent = `Total: Rp ${totalHarga.toLocaleString('id-ID')}`;
    }

    function hapusItem(index) {
      const item = keranjang[index];
      const produk = daftarProduk.find(p => p.nama === item.nama && p.harga === item.harga);
      if (produk) produk.stok++;
      document.querySelectorAll("#produkGrid button").forEach(btn => {
        const namaProduk = btn.parentElement.querySelector("h3").textContent;
        if (namaProduk === produk.nama) {
          btn.textContent = "Tambah";
          btn.disabled = false;
          btn.classList.replace("bg-red-500", "bg-lightgreen");
        }
      });
      keranjang.splice(index, 1);
      updateKeranjang();
    }

    // ===== Validasi Nomor WhatsApp =====
    function isValidWhatsApp(raw) {
      if (!raw) return null;
      let cleaned = raw.replace(/[\s()-\.]/g, '');
      if (cleaned.startsWith('+')) cleaned = cleaned.slice(1);
      if (cleaned.startsWith('0')) cleaned = '62' + cleaned.slice(1);
      const match = cleaned.match(/^62(8[1-9][0-9]{6,12})$/);
      return match ? '62' + match[1] : null;
    }

    const waInput = document.getElementById('whatsapp');
    const waError = document.getElementById('waError');
    const orderBtn = document.getElementById('orderBtn');

    function validateWAInput() {
      const val = waInput.value.trim();
      const normalized = isValidWhatsApp(val);
      if (normalized) {
        waError.classList.add('hidden');
        orderBtn.disabled = false;
        orderBtn.classList.remove('opacity-50', 'cursor-not-allowed');
      } else {
        waError.classList.remove('hidden');
        orderBtn.disabled = true;
        orderBtn.classList.add('opacity-50', 'cursor-not-allowed');
      }
      return normalized;
    }

    waInput.addEventListener('input', validateWAInput);
    validateWAInput();

    function kirimWhatsApp() {
      const pembeliRaw = document.getElementById("whatsapp").value.trim();
      const email = document.getElementById("email").value.trim();
      const pembeliWA = isValidWhatsApp(pembeliRaw);
      if (!pembeliWA) return alert("Nomor WhatsApp tidak valid!");
      if (!email) return alert("Isi email terlebih dahulu!");
      if (keranjang.length === 0) return alert("Keranjang masih kosong!");

      let pesan = `Halo Admin!%0A%0ASaya ingin memesan:%0A`;
      let total = 0;
      keranjang.forEach((i, idx) => {
        pesan += `${idx + 1}. ${i.nama} - Rp ${i.harga.toLocaleString('id-ID')}%0A`;
        total += i.harga;
      });
      pesan += `%0Aüí∞ Total: Rp ${total.toLocaleString('id-ID')}%0Aüìß ${email}%0Aüì± ${pembeliRaw}`;
      window.open(`https://wa.me/${pembeliWA}?text=${pesan}`, "_blank");
    }

    // ===== Invoice & Ulasan =====
    function cekInvoice() {
      const id = document.getElementById("invoice-id").value.trim();
      const status = document.getElementById("status-invoice");
      const data = { "INV-2023-123": "Lunas", "INV-2023-124": "Belum Dibayar", "INV-2023-125": "Dalam Proses" };
      status.textContent = data[id] ? `Status Invoice ${id}: ${data[id]}` : "Invoice tidak ditemukan.";
    }

    function tambahUlasan() {
      const nama = document.getElementById('nama').value.trim();
      const ulasan = document.getElementById('ulasan').value.trim();
      const rating = document.querySelector('input[name="rating"]:checked');
      if (!nama || !ulasan || !rating) return alert('Lengkapi semua kolom!');
      const div = document.createElement('div');
      div.className = 'bg-[#13294b] p-4 rounded-lg';
      div.innerHTML = `<h3 class='font-bold'>${nama}</h3><div class='text-yellow-400'>${'‚òÖ'.repeat(rating.value)}${'‚òÜ'.repeat(5 - rating.value)}</div><p class='text-gray-300'>${ulasan}</p>`;
      document.getElementById('review-list').appendChild(div);
      document.getElementById('nama').value = '';
      document.getElementById('ulasan').value = '';
      rating.checked = false;
      alert('Terima kasih atas ulasannya!');
    }
  </script>
</body>
</html>
